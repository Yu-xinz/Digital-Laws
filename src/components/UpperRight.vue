<template>
  <div id="hotdot" class="upper-right"></div>
</template>

<style scoped>
.upper-right {
  flex: 1;
  width: 400px;
  background-color: #faf8f8;
  margin-left: 20px;
  margin-bottom: 20px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
}
</style>

<script setup lang="ts">
import * as echarts from "echarts";
import { onMounted } from "vue";

onMounted(() => {
  var chartDom = document.getElementById("hotdot");
  var myChart = echarts.init(chartDom);

  // prettier-ignore
  const china_provinces_x = [
    "广东省", "江苏省", "山东省", "浙江省", "河南省",
    "四川省", "湖北省", "福建省", "湖南省", "安徽省",
    "上海市", "河北省", "北京市", "陕西省", "江西省",
    "重庆市", "辽宁省", "云南省", "广西壮族自治区", "山西省",
    "内蒙古自治区", "贵州省", "新疆维吾尔自治区", "天津市", "黑龙江省",
    "吉林省", "甘肃省", "海南省", "宁夏回族自治区", "青海省", "西藏自治区"
]
  // prettier-ignore
  const china_provinces_y = [
    "广东省", "江苏省", "山东省", "浙江省", "河南省",
    "四川省", "湖北省", "福建省", "湖南省", "安徽省",
    "上海市", "河北省", "北京市", "陕西省", "江西省",
    "重庆市", "辽宁省", "云南省", "广西壮族自治区", "山西省",
    "内蒙古自治区", "贵州省", "新疆维吾尔自治区", "天津市", "黑龙江省",
    "吉林省", "甘肃省", "海南省", "宁夏回族自治区", "青海省", "西藏自治区"
]
  // prettier-ignore
  const data = [[17,3,24],[17,0,40],[17,17,123],[17,13,11],[17,4,70],[17,8,39],[17,10,6],[17,2,52],[17,1,20],[17,21,4],[17,20,8],[17,11,33],[17,7,52],[17,18,16],[17,14,20],[17,9,122],[17,15,7],[17,5,10],[17,19,9],[17,25,2],[17,26,1],[17,6,3],[17,29,1],[3,3,33],[3,9,8],[3,6,9],[3,14,2],[3,7,3],[3,19,3],[3,1,4],[3,5,4],[3,2,2],[3,0,1],[3,4,1],[3,17,2],[3,11,1],[7,7,190],[7,5,4],[7,0,8],[7,14,13],[7,21,3],[7,18,1],[7,17,3],[7,10,2],[7,1,1],[7,15,1],[7,27,1],[21,10,2],[21,21,43],[21,14,8],[21,27,53],[21,11,25],[21,0,5],[21,3,24],[21,9,18],[21,7,38],[21,1,16],[21,8,3],[21,5,4],[21,16,5],[21,2,6],[21,4,15],[21,19,7],[21,17,2],[21,15,8],[21,18,1],[2,2,260],[2,5,2],[2,1,8],[2,9,6],[2,7,4],[2,24,2],[2,4,13],[2,19,2],[2,17,2],[2,11,38],[2,28,1],[2,3,1],[2,10,1],[18,11,42],[18,18,55],[18,4,28],[18,14,1],[18,2,38],[18,7,8],[18,17,9],[18,9,20],[18,1,2],[18,20,2],[18,0,26],[18,24,1],[18,3,3],[18,21,7],[18,8,3],[14,11,3],[14,2,2],[14,7,17],[14,14,44],[14,6,5],[14,0,5],[14,4,9],[14,15,1],[14,3,16],[14,17,3],[14,9,8],[14,8,3],[5,1,3],[5,11,17],[5,5,49],[5,7,47],[5,2,52],[5,4,17],[5,9,7],[5,13,2],[5,17,5],[5,0,7],[5,3,7],[5,12,3],[5,10,1],[5,15,1],[5,20,2],[5,19,1],[5,23,1],[9,9,88],[9,4,6],[9,3,3],[9,12,2],[9,11,3],[9,7,2],[9,17,2],[9,2,3],[9,10,1],[9,1,7],[9,8,1],[9,5,1],[24,2,3],[24,4,1],[24,12,1],[24,20,3],[24,24,2],[24,16,2],[24,11,1],[8,0,9],[8,8,29],[8,18,1],[8,13,2],[8,1,1],[8,6,1],[8,7,9],[8,11,3],[8,3,3],[8,17,1],[8,5,1],[8,4,3],[8,21,1],[8,14,1],[15,7,3],[15,15,19],[15,19,2],[15,9,1],[15,13,1],[15,2,2],[15,1,1],[15,11,2],[15,17,1],[15,21,1],[15,4,2],[11,11,185],[11,20,2],[11,2,7],[11,16,1],[11,21,2],[11,9,3],[11,19,2],[11,23,4],[11,4,3],[11,18,1],[11,10,1],[11,13,1],[11,1,2],[11,6,1],[13,19,5],[13,12,1],[13,13,39],[13,7,7],[13,2,8],[13,5,1],[13,1,2],[13,18,1],[13,11,2],[13,4,4],[13,26,2],[13,3,1],[13,8,1],[1,9,9],[1,5,1],[1,17,1],[1,2,14],[1,1,52],[1,0,1],[1,3,2],[1,15,1],[1,13,1],[1,7,1],[19,19,35],[19,4,27],[19,2,34],[19,5,4],[19,11,9],[19,7,1],[19,20,3],[19,13,4],[16,2,2],[16,16,16],[16,25,3],[16,21,3],[16,20,6],[16,11,1],[16,24,1],[4,4,212],[4,11,14],[4,15,1],[4,10,2],[4,9,29],[4,7,3],[4,6,4],[4,5,1],[4,2,9],[4,19,1],[4,28,1],[4,18,3],[4,26,2],[4,23,2],[4,1,2],[4,21,1],[4,0,5],[4,12,1],[4,14,2],[4,3,1],[0,5,7],[0,4,18],[0,2,4],[0,9,8],[0,11,4],[0,0,72],[0,10,2],[0,21,5],[0,7,17],[0,14,4],[0,18,5],[0,19,1],[0,8,3],[0,6,3],[0,15,1],[0,17,1],[6,9,16],[6,6,15],[6,14,1],[6,12,1],[6,4,10],[6,2,4],[6,7,1],[6,1,1],[6,21,3],[6,11,5],[6,19,2],[6,0,2],[6,13,1],[6,3,1],[25,25,12],[25,16,4],[25,20,6],[25,11,8],[25,5,1],[25,24,1],[28,20,1],[28,26,3],[28,28,1],[22,28,1],[22,22,3],[22,7,1],[22,2,1],[22,26,3],[26,26,19],[26,13,1],[20,2,1],[20,11,4],[20,26,1],[20,20,8],[20,19,1],[20,5,1],[12,2,1],[12,4,5],[12,9,1],[12,11,1],[12,12,2],[29,29,3],[29,5,1],[29,26,2],[23,23,4],[10,10,3],[10,9,1],[27,27,1],[30,26,2],[30,29,2],]
    .map((item) => [item[1], item[0], item[2] || '-']);
  var option = {
    tooltip: {
      position: "top",
      formatter: (params) => `
        <div style="background-color:white;margin:-8px;padding:12px;border-color: #000;border-radius: 8px;">
          ${params.marker}
          <span style="font-size:14px;color:#666;font-weight:400;margin-left:2px">
            ${china_provinces_y[params.data[1]]} → ${params.name}</span>
          <span style="float:right;margin-left:20px;font-size:14px;color:#666;font-weight:900">
            ${params.data[2]}
          </span>
        </div>
      `,
    },
    grid: {
      height: "70%",
      top: "10%",
    },
    xAxis: {
      type: "category",
      data: china_provinces_x,
      splitArea: {
        show: true,
      },
      axisLabel: {
        show: false
      },
      name: "拐出地",
      nameLocation: "middle"
    },
    yAxis: {
      type: "category",
      data: china_provinces_y,
      splitArea: {
        show: true,
      },
      axisLabel: {
        show: false
      },
      name: "拐入地",
      nameLocation: "middle"
    },
    visualMap: {
      min: 0,
      max: 80,
      calculable: true,
      orient: "horizontal",
      left: "center",
      bottom: "5%",
    },
    series: [
      {
        name: "Punch Card",
        type: "heatmap",
        data: data,
        label: {
          show: false,
        },
        emphasis: {
          itemStyle: {
            shadowBlur: 10,
            shadowColor: "rgba(0, 0, 0, 0.5)",
          },
        },
      },
    ],
  };

  myChart.setOption(option)
})
</script>
